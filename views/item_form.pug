extends layout

block content
  div.container-form
    div.item-form
      h1= title
      form(method='POST' action='')
        label(for='name') Name:
          input#name(type='text' name='name' minlength=1 maxlength=30 value=(item===undefined ? '' : item.name) placeholder=`Item name`)
        label(for='description') Description:
          textarea#description(type='text' name='description' rows=7 maxlength=100 placeholder=`Item description`) #{item===undefined ? '' : item.description}
        label(for='category') Category:
        select#category(name='category' required='true')
          option(value='') --- Choose category ---
          - category_list.sort((x, y) => {let catX = x.name.toUpperCase(); let catY = y.name.toUpperCase(); return (catX < catY) ? -1 : (catX > catY) ? 1 : 0;});
          each category in category_list
            if item
              option(
                value=category._id
                selected=(category._id.toString() == item.category._id) ? 'selected' : false
              ) #{category.name}
            else
              option(value=category._id) #{category.name}
        label(for='price') Price:
          input#price(type='number' name='price' min=0 value=(item===undefined ? '' : item.price) placeholder=`Item price in dollars`)
        label(for='stock') Stock:
          input#stock(type='number' name='stock' min=0 value=(item===undefined ? '' : item.stock) placeholder=`Item stock`)
        button.btn(type='submit') Submit

      if errors
        ol.errors-msg
          for error in errors
            li!= error.msg
